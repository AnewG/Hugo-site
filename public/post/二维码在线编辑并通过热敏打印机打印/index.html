<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="lin">
    <meta name="description" content="This is my blog, read it and enjoy.">
    <meta name="generator" content="Hugo 0.16" />

    
    <title>二维码在线编辑并通过热敏打印机打印 &middot; @anewg’s Blog</title>

    <link rel="stylesheet" href="http://llo.io/css/weblog.css" media="screen" charset="utf-8" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/1.2.14/css/lightgallery.min.css" type="text/css" />
    


    
		<link href="http://llo.io/index.xml" rel="alternate" type="application/rss+xml" title="Blog" />
		
  </head>
  <body class="site">

<header>
  <nav>
    <h1><a href="/">@anewg</a>’s Blog.</h1>
    <div class="menu">
      
      <ul>
        
            <li>
              <a href="/post/">Post</a>
              
            </li>
        
        <li><a href="https://github.com/AnewG">About</a></li>
      </ul>
    </div>
  </nav>
</header>


  <main class="content">
    <article class="page">
      <p>
        <p>使用 jquery 插件在前端画出 svg 图像后,首先通过 html5 的 canvas 的 toDataURL 方法转成 base64 编码的图像数据，通过 ajax 上传 logo 与 base64 数据。后台接收后合并两图像。</p>

<p><br /></p>

<p>图片要转成 BMP 格式。BMP 格式根据文件头信息不同数据组成也不同，我的是24位BMP，去除头文件54个字节后，每三个字节表示一个点(RGB),合并RGB后二值化像素点，就可以打印了。</p>

<p><br /></p>

<p>特别注意PHP的十六进制表示：</p>

<p><br /></p>

<p>1.‘\xFE’ 表示的是4个字符</p>

<p><br /></p>

<p>2.“\xFE” 表示的是1个字符(即该16进制数字对应的ascii码字符)</p>

<p><br /></p>

<p>PS:使用到的相关函数有unpack(),chr()</p>

      </p>
    </article>
  </main>

<footer>
  <div class="footer_text">
      <div>
        <h3>Hi, <a href="https://github.com/AnewG">I'm lin</a></h3>
        <p>
          Web developer, Xiamen

        </p>
      </div>
      <div>
          <h3>&nbsp;</h3>
          
        </div>
      </div>
  </div>

  
    <div class="footer_copyright">
      &copy; 2016 <a href="https://github.com/AnewG">lin zhizhong</a>
       - Made in Xiamen, Software Park
    </div>
  
</footer>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/2.2.0/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/1.2.14/js/lightgallery-all.min.js" charset="utf-8"></script>
    <script src="/js/weblog.js" charset="utf-8"></script>
    

    

    
  </body>
</html>

